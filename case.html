<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Project Details | zka26</title>

  <meta name="theme-color" content="#06070a" />
  <link rel="icon" href="assets/favicon.png" type="image/png" />

  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
  <div class="bg" aria-hidden="true">
    <div class="blob one"></div>
    <div class="blob two"></div>
  </div>
  <div class="noise" aria-hidden="true"></div>

  <header>
    <div class="wrap">
      <div class="nav">
        <div class="brand">
          <img src="assets/favicon.png"
               alt="Favicon"
               loading="lazy"
               decoding="async"
               width="50"
               height="50" />
          <div>
            <h1 data-i18n="nav.name">Zoltán Katona</h1>
            <p data-i18n="nav.tagline">IT Support • IT Ops • Cisco</p>
            <p data-i18n="nav.tagline2">.NET (WPF/ASP.NET) • Python/C++</p>
          </div>
        </div>

        <div class="actions">
          <div class="lang-pill" role="group" aria-label="Language switch">
            <button class="lang-seg" type="button" data-lang="en" data-i18n-attr="aria-label:lang.en_alt">
              <img class="flag" src="assets/flags/en.png" data-i18n-attr="alt:lang.en_alt" alt="English (EN)" />
              <span class="lang-code">EN</span>
            </button>
            <span class="lang-divider" aria-hidden="true"></span>
            <button class="lang-seg" type="button" data-lang="hu" data-i18n-attr="aria-label:lang.hu_alt">
              <img class="flag" src="assets/flags/hu.png" data-i18n-attr="alt:lang.hu_alt" alt="Magyar (HU)" />
              <span class="lang-code">HU</span>
            </button>
          </div>

          <button id="themeBtn" class="btn icon-btn" type="button" data-i18n-attr="aria-label:theme.toggle_aria">
            <img class="icon-img" src="assets/icon/light.png" alt="" aria-hidden="true" />
            <span id="themeLabel" class="btn-text">Dark mode</span>
          </button>

          <a class="btn icon-btn back-btn" href="index.html#projects" data-i18n-attr="aria-label:btn.back">
            <span class="icon" aria-hidden="true">←</span>
            <span class="btn-text" data-i18n="btn.back">Back</span>
          </a>
        </div>
      </div>
    </div>
  </header>

  <main class="wrap" style="padding-top: 18px;">
    <section>
      <div class="card md">
        <div id="mdStatus" style="color: var(--muted); font-size: 13px;" data-i18n="case.loading">Loading…</div>
        <div id="mdContent" class="md" style="margin-top: 8px;"></div>
        <div id="mdFallback" style="display:none; margin-top: 12px;"></div>
      </div>
    </section>

    <footer>
      <div class="foot">
        <div data-i18n-html="footer.copyright">© <span id="year"></span> Zoltán Katona</div>
        <div class="small" data-i18n="footer.built">HTML • CSS • JS (GitHub Pages)</div>
      </div>
    </footer>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <script src="js/i18n.js" defer></script>
  <script src="js/app.js" defer></script>

  <script defer>
    (function () {
      function getLang() {
        return (window.getActiveLang && window.getActiveLang()) || (localStorage.getItem("site_lang") || "hu");
      }

      function getDoc() {
        const p = new URLSearchParams(location.search);
        return (p.get("doc") || "").trim();
      }

      async function tryFetch(path) {
        const res = await fetch(path, { cache: "no-store" });
        if (!res.ok) return null;
        return await res.text();
      }

      async function loadDoc() {
        const doc = getDoc();
        const status = document.getElementById("mdStatus");
        const out = document.getElementById("mdContent");
        const fb = document.getElementById("mdFallback");
        const year = document.getElementById("year");
        if (year) year.textContent = new Date().getFullYear();

        if (!doc) {
          if (status) status.textContent = window.t(getLang(), "case.not_found") + " (missing doc param)";
          return;
        }

        if (status) status.textContent = window.t(getLang(), "case.loading");
        out.innerHTML = "";

        const lang = getLang();
        const pathLang = `content/${lang}/${doc}.md`;
        const pathHu = `content/hu/${doc}.md`;

        let md = await tryFetch(pathLang);
        if (md == null && lang !== "hu") md = await tryFetch(pathHu);

        if (md == null) {
          if (status) status.textContent = window.t(getLang(), "case.not_found") + " " + doc;
          const rawBtn = document.createElement("a");
          rawBtn.className = "btn";
          rawBtn.href = pathLang;
          rawBtn.textContent = window.t(getLang(), "case.open_raw");
          fb.style.display = "block";
          fb.appendChild(rawBtn);
          return;
        }

        if (status) status.textContent = "";
        if (window.marked && typeof window.marked.parse === "function") {
          out.innerHTML = window.marked.parse(md);
        } else {
          const pre = document.createElement("pre");
          pre.textContent = md;
          out.appendChild(pre);
        }
      }

      document.addEventListener("langchange", loadDoc);
      document.addEventListener("DOMContentLoaded", loadDoc);
    })();
  </script>
</body>
</html>
